---
title: "[PHP+MYSQL]CRUD êµ¬í˜„ - 1 (ë¡œê·¸ì¸, íšŒì›ê°€ì…)"
excerpt: "ë¡œê·¸ì¸, íšŒì›ê°€ì… êµ¬í˜„"

categories:
  - CRUD
tags:
  - [WEB, CRUD]

permalink: /CRUD/CRUD-1/

toc: true
toc_sticky: true

date: 2025-03-01
last_modified_at: 2025-03-01
---

ì›¹ ê¸°ë°˜ì„ ë‹¤ì§€ê¸° ìœ„í•´ì„œ PHP, MYSQLì„ ì´ìš©í•œ CRUD ê¸°ëŠ¥ì„ ë§Œë“¤ì–´ ë³´ë ¤ê³  í•œë‹¤.   
ì›¹í•´í‚¹ ê³µë¶€í• ë•Œ ë‚´ CRUD ì›¹ì„œë²„ë¥¼ ê³µê²©í•´ë³´ë©´ì„œ ê³µë¶€í•  ìƒê°ì´ë‹¤.  

ìš°ì„  ì½”ë“œì˜ ë³´ì•ˆì€ ì¼ì ˆ ì‹ ê²½ ì“°ì§€ ì•Šê³  ì‘ì„±í•˜ì˜€ë‹¤.  
ì¶”í›„ ì›¹í•´í‚¹ ì‹¤ìŠµì„ í†µí•´ ë³´ì™„í•´ ë‚˜ê°ˆ ì˜ˆì •ì´ë‹¤.  

---
## MYSQL DB TABLE ìƒì„±

```
CREATE USER 'admin'@'localhost' IDENTIFIED BY '7777' # admin user ìƒì„±

GRANT ALL PRIVILEGES ON *.* TO 'admin'@'localhost' WITH GRANT OPTION; # ê¶Œí•œ ë¶€ì—¬

# admin userë¡œ ë³€ê²½ í›„

CREATE DATABASE user_db; # ìœ ì € DB ìƒì„±ì„±
USE user_db;
mysql> CREATE TABLE users (
  name VARCHAR(10) NOT NULL, # VARCHAR : ê°€ë³€ê¸¸ì´ ë¬¸ìì—´
  uid VARCHAR(30) UNIQUE NOT NULL, # UNIEQUE : ìœ ë‹ˆí¬í•œ ê°’
  upw VARCHAR(30) NOT NULL,
  id INT AUTO_INCREMENT PRIMARY KEY
   );
```
<br>
```
DESCRIBE users; # í…Œì´ë¸” í™•ì¸
```
**[ì¶œë ¥]**
```
+-------+-------------+------+-----+---------+----------------+
| Field | Type        | Null | Key | Default | Extra          |
+-------+-------------+------+-----+---------+----------------+
| name  | varchar(10) | NO   |     | NULL    |                |
| uid   | varchar(30) | NO   | UNI | NULL    |                |
| upw   | varchar(30) | NO   |     | NULL    |                |
| id    | int         | NO   | PRI | NULL    | auto_increment |
+-------+-------------+------+-----+---------+----------------+
4 rows in set (0.01 sec)
```
---

**í…ŒìŠ¤íŠ¸ìš© user ìƒì„±**
```
INSERT INTO users (name, uid, upw)
VALUES ('test', 'test123', 'test123');
```
<br>
```
SELECT * FROM users # í…Œì´ë¸” í™•ì¸
```
**[ì¶œë ¥]**
```
+-------+---------+---------+----+
| name  | uid     | upw     | id |
+-------+---------+---------+----+
| test  | test123 | test123 |  1 |
+-------+---------+---------+----+
1 rows in set (0.00 sec)
```
---

## PHP MYSQL ì—°ê²°í•˜ê¸°

/proc í´ë”ë¥¼ ë§Œë“¤ê³  db.php íŒŒì¼ ìƒì„±

### db.php
```
<?php
$host = "localhost"; // í˜¸ìŠ¤íŠ¸ ì£¼ì†Œ
$user = "admin";     // ì‚¬ìš©ì ì´ë¦„
$pass = "7777";      // db ë¹„ë°€ë²ˆí˜¸
$dbname = "user_db"; // ì—°ê²°í•  db ì´ë¦„

$conn = new mysqli($host, $user, $pass, $dbname);

if ($conn->connect_error) {
    die("DB ì—°ê²° ì‹¤íŒ¨: " . $conn->connect_error);
} // í–ˆë”ë‹ˆ ì‘ë™ ì•ˆí•¨. ì¶”í›„ í™•ì¸.
?>
```
---
## HTML

ìš°ì„  gptë¥¼ ë³¶ì•„ì„œ HTML ë¼ˆëŒ€ ì œì‘  

### index.php
```
<?php
session_start();
?>

<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/index_style.css">
    <title>zoo-log</title>
</head>

<body>

    <header>
        <h2>ğŸ“ CRUD BOARD</h2>
        <?php if (isset($_SESSION['id'])): ?> // ë¡œê·¸ì¸ ì„¸ì…˜ ìœ ë¬´ í™•ì¸
                <div class="auth">
                        <a style = "font-weight : bold; color : green;"><?= htmlspecialchars($_SESSION['name']); ?></a>
                        <a href="/logout">Log out</a>
                </div>
        <?php else: ?>
                <div class="auth">
                        <a href="/login">Login</a>
                        <a href="/register">Register</a>
                </div>
        <?php endif; ?>
    </header>

    <div class="container">
        <div class="board-header">
            <h3>ê²Œì‹œê¸€ ëª©ë¡</h3>
            <a href="#" class="btn">ê¸€ì“°ê¸°</a>
        </div>
        <table>
            <tr>
                <th>ë²ˆí˜¸</th>
                <th>ì œëª©</th>
                <th>ì‘ì„±ì</th>
                <th>ë‚ ì§œ</th>
            </tr>
            <tr>
                <td>1</td>
                <td><a href="#">ì²« ë²ˆì§¸ ê¸€</a></td>
                <td>í™ê¸¸ë™</td>
                <td>03-02</td>
            </tr>
            <tr>
                <td>2</td>
                <td><a href="#">ë‘ ë²ˆì§¸ ê¸€</a></td>
                <td>ì´ëª½ë£¡</td>
                <td>03-01</td>
            </tr>
        </table>
    </div>

</body>

</html>
```
### register.php
```
<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/login_style.css">
    <title>zoo-log</title>
</head>

<body>

    <div class="container">
        <h2>íšŒì›ê°€ì…</h2>
        <form action="proc/register_proc.php" method="POST">                 
        // action : ê°’ ë³´ë‚¼ ê²½ë¡œ
            <input type="name" name="name" placeholder="ë‹‰ë„¤ì„" required>    
            // name : ì°¸ì¡°í•  ê°’ ì´ë¦„
            <input type="text" name="uid" placeholder="ì•„ì´ë””" required>
            <input type="password" name="upw" placeholder="ë¹„ë°€ë²ˆí˜¸" required>
            <input type="password" name="upw_check" placeholder="ë¹„ë°€ë²ˆí˜¸ í™•ì¸" required>
            <button type="submit" class="btn">ê°€ì…í•˜ê¸°</button>
        </form>
        <a href="/login">ë¡œê·¸ì¸</a>
    </div>

</body>

</html>
```
### login.php
```
<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/login_style.css">
    <title>zoo-log</title>
</head>

<body>

    <div class="container">
        <h2>ë¡œê·¸ì¸</h2>
        <form action="proc/login_proc.php" method="POST">                 
        // action : ê°’ ë³´ë‚¼ ê²½ë¡œ
            <input type="text" name="uid" placeholder="ì•„ì´ë””" required>  
            // name : ì°¸ì¡°í•  ê°’ ì´ë¦„
            <input type="password" name="upw" placeholder="ë¹„ë°€ë²ˆí˜¸" required>
            <button type="submit" class="btn">ë¡œê·¸ì¸</button>
        </form>
        <a href="/register">íšŒì›ê°€ì…</a>
    </div>

</body>

</html>
```
---
## PHP ê¸°ëŠ¥ êµ¬í˜„
### register.php
```
<?php
session_start();  // ì„¸ì…˜
include "db.php"; // DB ì—°ê²°

$name = $_POST['name'];
$uid = $_POST['uid'];
$upw = $_POST['upw'];
$upw_check = $_POST['upw_check'];

if ($upw !== $upw_check) {
        echo "<script>alert('ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.'); history.back();</script>";
        exit();
}

$id_check = $conn->query("SELECT uid FROM users WHERE uid = '$uid'");

if ($id_check->num_rows > 0) {
        echo "<script>alert('ì´ë¯¸ ì¡´ì¬í•˜ëŠ” ì•„ì´ë””'); history.back();</script>";
        exit();
}

$sql = "INSERT INTO users (name, uid, upw) VALUES ('$name', '$uid', '$upw')";

if ($conn->query($sql) === TRUE) {
        echo "<script>alert('íšŒì›ê°€ì… ì„±ê³µ'); location.href='/';</script>";
}
else {
        echo "<script>alert('íšŒì›ê°€ì… ì‹¤íŒ¨'); history.back();</script>";
}

$conn->close(); //ì„¸ì…˜ ì¢…ë£Œ

?>
```
### login.php
```
<?php
session_start();

include 'db.php';

$uid = $_POST['uid'];
$upw = $_POST['upw'];

$sql = "SELECT * FROM users WHERE uid = '$uid' AND upw = '$upw'";
$result = $conn->query($sql);

if ($result->num_rows > 0) {
        $user = mysqli_fetch_array($result);
        // mysqli_fetch_array() : ì¿¼ë¦¬ì˜ ê²°ê³¼ê°’ì„ ë°°ì—´ í˜•íƒœë¡œ ê°€ì ¸ì˜´
        $_SESSION['id'] = $user['id'];
        // ì„¸ì…˜ ì„¤ì •
        $_SESSION['name'] = $user['name'];
        // í”„ë¡œí•„ìš© ì´ë¦„
        echo "<script>alert('{$user['name']}ë‹˜, í™˜ì˜í•©ë‹ˆë‹¤.'); location.href='/';</script>";
}
else {
        echo "<script>alert('ë¡œê·¸ì¸ ì‹¤íŒ¨'); history.back();</script>";
}

$conn -> close();
?>
```
### logout.php
```
<?php
session_start();
session_destroy(); // ì„¸ì…˜ ì£½ì´ê¸°
?>
<script>
        alert("ë¡œê·¸ì•„ì›ƒ ë˜ì—ˆìŠµë‹ˆë‹¤");
        location.replace('index.php');
</script>
```
---
ì¶”í›„ ê¸°ëŠ¥ì„ ë§Œë“¤ê¸° ìœ„í•´ ìµœëŒ€í•œ PHP ë¬¸ë²•ì„ ì´í•´í•˜ë©´ì„œ ì§„í–‰í•˜ì˜€ë‹¤.